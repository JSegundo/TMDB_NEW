{"ast":null,"code":"import _regeneratorRuntime from\"/home/segundo/Desktop/TMDB_NEW/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/segundo/Desktop/TMDB_NEW/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/segundo/Desktop/TMDB_NEW/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{motion}from\"framer-motion\";import{baseUrl}from\"../utils/baseUrl.js\";import axios from\"axios\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserProfile=function UserProfile(){var sessUser=JSON.parse(localStorage.getItem(\"sess-user\"));var _useState=useState([]),_useState2=_slicedToArray(_useState,2),favMovies=_useState2[0],setFavMovies=_useState2[1];useEffect(function(){getFavMovies();},[]);var getFavMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _sessUser$favoriteMov;var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:results=[];if(!((sessUser===null||sessUser===void 0?void 0:sessUser.favoriteMovies)!==null)){_context.next=7;break;}_context.next=4;return Promise.all(sessUser===null||sessUser===void 0?void 0:(_sessUser$favoriteMov=sessUser.favoriteMovies)===null||_sessUser$favoriteMov===void 0?void 0:_sessUser$favoriteMov.map(function(movieid){return axios.get(\"\".concat(baseUrl,\"/movies/singlemovie/\").concat(movieid)).then(function(obj){return obj.data;});}));case 4:_context.t0=_context.sent;_context.next=8;break;case 7:_context.t0=[];case 8:results=_context.t0;setFavMovies(results);case 10:case\"end\":return _context.stop();}}},_callee);}));return function getFavMovies(){return _ref.apply(this,arguments);};}();var navigate=useNavigate();return/*#__PURE__*/_jsx(motion.div,{className:\"user-profile-container\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:1,transition:{duration:0.4}},children:(sessUser===null||sessUser===void 0?void 0:sessUser.id)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{className:\"user-header\",style:{display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\",alignItems:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",sessUser.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Member since\",\" \",sessUser.createdAt.split(\"T\")[0].split(\"-\").join(\"/\")]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"favorite-movies\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"favorites-title\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Your favorite movies:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"favs-container\",children:favMovies===null||favMovies===void 0?void 0:favMovies.map(function(movie,i){return/*#__PURE__*/_jsx(\"a\",{href:\"/movies/singlemovie/\".concat(movie.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:movie.title}),/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/w300/\".concat(movie.poster_path),alt:\"movie favorite\",height:\"350px\"})]})},i);})})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"You have to log your account. \"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/user/login\");},children:\"Go to Login page\"})]})});};export default UserProfile;","map":{"version":3,"sources":["/home/segundo/Desktop/TMDB_NEW/front/src/layouts/UserProfile.jsx"],"names":["React","useState","useEffect","useNavigate","motion","baseUrl","axios","UserProfile","sessUser","JSON","parse","localStorage","getItem","favMovies","setFavMovies","getFavMovies","results","favoriteMovies","Promise","all","map","movieid","get","then","obj","data","navigate","opacity","transition","duration","id","display","flexDirection","justifyContent","alignItems","name","createdAt","split","join","movie","i","title","poster_path"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { motion } from \"framer-motion\"\nimport { baseUrl } from \"../utils/baseUrl.js\"\n\nimport axios from \"axios\"\nconst UserProfile = () => {\n  let sessUser = JSON.parse(localStorage.getItem(\"sess-user\"))\n  const [favMovies, setFavMovies] = useState([])\n\n  useEffect(() => {\n    getFavMovies()\n  }, [])\n\n  const getFavMovies = async () => {\n    let results = []\n    results =\n      sessUser?.favoriteMovies !== null\n        ? await Promise.all(\n            sessUser?.favoriteMovies?.map((movieid) => {\n              return axios\n                .get(`${baseUrl}/movies/singlemovie/${movieid}`)\n                .then((obj) => {\n                  return obj.data\n                })\n            })\n          )\n        : []\n\n    setFavMovies(results)\n  }\n\n  const navigate = useNavigate()\n\n  return (\n    <motion.div\n      className=\"user-profile-container\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 1, transition: { duration: 0.4 } }}\n    >\n      {sessUser?.id ? (\n        <>\n          <header\n            className=\"user-header\"\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"flex-start\",\n              alignItems: \"center\",\n            }}\n          >\n            <div>\n              <h1>Welcome, {sessUser.name}</h1>\n              <p>\n                Member since{\" \"}\n                {sessUser.createdAt.split(\"T\")[0].split(\"-\").join(\"/\")}\n              </p>\n            </div>\n          </header>\n          <div className=\"favorite-movies\">\n            <div className=\"favorites-title\">\n              <h2>Your favorite movies:</h2>\n            </div>\n            <div className=\"favs-container\">\n              {favMovies?.map((movie, i) => {\n                return (\n                  <a href={`/movies/singlemovie/${movie.id}`} key={i}>\n                    <div className=\"div-container\">\n                      <h3>{movie.title}</h3>\n                      <img\n                        src={`https://image.tmdb.org/t/p/w300/${movie.poster_path}`}\n                        alt=\"movie favorite\"\n                        height=\"350px\"\n                      ></img>\n                    </div>\n                  </a>\n                )\n              })}\n            </div>\n          </div>\n        </>\n      ) : (\n        <div>\n          <h1>You have to log your account. </h1>\n          <button onClick={() => navigate(\"/user/login\")}>\n            Go to Login page\n          </button>\n        </div>\n      )}\n    </motion.div>\n  )\n}\n\nexport default UserProfile\n"]},"metadata":{},"sourceType":"module"}