{"ast":null,"code":"import _slicedToArray from\"/home/segundo/Desktop/TMDB_NEW/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faSearch}from\"@fortawesome/free-solid-svg-icons\";import\"../assets/styles/index.css\";import{useUser}from\"../context/UserContext.js\";import{baseUrl}from\"../utils/baseUrl.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var API=\"https://api.themoviedb.org/3\";var apiKEY=\"api_key=e9e7cb266dc0d3f00bd94a93dae48419\";var Navbar=function Navbar(){var _movies$results;var _useUser=useUser(),user=_useUser.user,setUser=_useUser.setUser;var sessUser=user;var navigate=useNavigate();var handleLogout=function handleLogout(){axios.post(\"\".concat(baseUrl,\"/user/logout\")).then(function(){localStorage.clear();setUser(null);// localStorage.removeItem(\"sess-user\")\nnavigate(\"/\");}).catch(function(err){return console.error(err);});};// barra de busqueda.\nvar _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),inputvalue=_React$useState2[0],setInputValue=_React$useState2[1];var handleChange=function handleChange(e){setInputValue(e.target.value);e.preventDefault();axios.get(\"\".concat(API,\"/search/multi?\").concat(apiKEY,\"&language=en-US&query=\").concat(inputvalue,\"&page=1&include_adult=true\")).then(function(resp){return resp.data;}).then(function(response){setMovies(response);// setSubmited(true)\n}).catch(function(err){return console.error(err);});};var _useState=useState(null),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),showSearchBar=_useState4[0],setShowSearchBar=_useState4[1];document.onclick=function(event){if(event.target.id!==\"container-busqueda-resultados\"){setMovies(null);}};return/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"nav-link\",children:\"TMDB\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"nav-link dropbtn\",children:\"Movies\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-content\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/movies/popular\",children:\"Popular \"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/movies/top_rated\",children:\"Top-rated \"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/movies/upcoming\",children:\"Upcoming \"})})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"nav-link dropbtn\",children:\" Tv Shows\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-content\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/tvshow/popular\",children:\"Popular \"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/tvshow/airingtoday\",children:\"Airing Today \"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/tvshow/toprated\",children:\"Top Rated \"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/tvshow/ontv\",children:\"On TV \"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchmovies\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setShowSearchBar(!showSearchBar);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch,className:\"iconobusqueda\",size:\"6x\"})}),showSearchBar&&/*#__PURE__*/_jsxs(\"form\",{// onSubmit={handleSubmit}\nclassName:\"inputsearch-invisible\",id:\"formsearch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search what you want..\",onChange:handleChange,value:inputvalue}),movies&&/*#__PURE__*/_jsx(\"div\",{className:\"container-busqueda-resultados\",id:\"container-busqueda-resultados\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"resultados-busqueda\",children:(_movies$results=movies.results)===null||_movies$results===void 0?void 0:_movies$results.map(function(mov,i){return mov.original_title?/*#__PURE__*/_jsx(\"li\",{className:\"single-result-search\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/movies/singlemovie/\".concat(mov.id),children:mov.original_title})},i):\"\";})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-logout-container\",children:(sessUser===null||sessUser===void 0?void 0:sessUser.id)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"login-logout-btn\",children:\"Log out\"}),/*#__PURE__*/_jsx(Link,{to:\"/user-profile\",children:/*#__PURE__*/_jsxs(\"p\",{children:[sessUser.name,\"'s profile\"]})})]}):/*#__PURE__*/_jsx(Link,{to:\"/user/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"login-logout-btn\",children:\"Log in\"})})})]});};export default Navbar;","map":{"version":3,"sources":["/home/segundo/Desktop/TMDB_NEW/front/src/layouts/Navbar.jsx"],"names":["React","useState","Link","useNavigate","axios","FontAwesomeIcon","faSearch","useUser","baseUrl","API","apiKEY","Navbar","user","setUser","sessUser","navigate","handleLogout","post","then","localStorage","clear","catch","err","console","error","inputvalue","setInputValue","handleChange","e","target","value","preventDefault","get","resp","data","response","setMovies","movies","showSearchBar","setShowSearchBar","document","onclick","event","id","results","map","mov","i","original_title","name"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport { Link, useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\"\nimport \"../assets/styles/index.css\"\nimport { useUser } from \"../context/UserContext.js\"\nimport { baseUrl } from \"../utils/baseUrl.js\"\n\nconst API = \"https://api.themoviedb.org/3\"\nconst apiKEY = \"api_key=e9e7cb266dc0d3f00bd94a93dae48419\"\n\nconst Navbar = () => {\n  const { user, setUser } = useUser()\n  let sessUser = user\n  const navigate = useNavigate()\n\n  const handleLogout = () => {\n    axios\n      .post(`${baseUrl}/user/logout`)\n      .then(() => {\n        localStorage.clear()\n        setUser(null)\n        // localStorage.removeItem(\"sess-user\")\n        navigate(\"/\")\n      })\n      .catch((err) => console.error(err))\n  }\n  // barra de busqueda.\n  const [inputvalue, setInputValue] = React.useState(null)\n\n  const handleChange = (e) => {\n    setInputValue(e.target.value)\n    e.preventDefault()\n    axios\n      .get(\n        `${API}/search/multi?${apiKEY}&language=en-US&query=${inputvalue}&page=1&include_adult=true`\n      )\n      .then((resp) => resp.data)\n      .then((response) => {\n        setMovies(response)\n        // setSubmited(true)\n      })\n      .catch((err) => console.error(err))\n  }\n\n  const [movies, setMovies] = useState(null)\n  const [showSearchBar, setShowSearchBar] = useState(null)\n\n  document.onclick = function (event) {\n    if (event.target.id !== \"container-busqueda-resultados\") {\n      setMovies(null)\n    }\n  }\n\n  return (\n    <header className=\"header\">\n      <nav className=\"navbar\">\n        <a href=\"/\" className=\"nav-link\">\n          TMDB\n        </a>\n\n        <button className=\"dropdown\">\n          <p className=\"nav-link dropbtn\">Movies</p>\n\n          <ul className=\"dropdown-content\">\n            <li>\n              <a href=\"/movies/popular\">Popular </a>\n            </li>\n            <li>\n              <a href=\"/movies/top_rated\">Top-rated </a>\n            </li>\n            <li>\n              <a href=\"/movies/upcoming\">Upcoming </a>\n            </li>\n          </ul>\n        </button>\n\n        <button className=\"dropdown\">\n          <p className=\"nav-link dropbtn\"> Tv Shows</p>\n\n          <ul className=\"dropdown-content\">\n            <li>\n              <a href=\"/tvshow/popular\">Popular </a>\n            </li>\n            <li>\n              <a href=\"/tvshow/airingtoday\">Airing Today </a>\n            </li>\n            <li>\n              <a href=\"/tvshow/toprated\">Top Rated </a>\n            </li>\n            <li>\n              <a href=\"/tvshow/ontv\">On TV </a>\n            </li>\n          </ul>\n        </button>\n      </nav>\n\n      <div className=\"searchmovies\">\n        <div onClick={() => setShowSearchBar(!showSearchBar)}>\n          <FontAwesomeIcon\n            icon={faSearch}\n            className=\"iconobusqueda\"\n            size=\"6x\"\n          />\n        </div>\n        {showSearchBar && (\n          <form\n            // onSubmit={handleSubmit}\n            className=\"inputsearch-invisible\"\n            id=\"formsearch\"\n          >\n            <input\n              type=\"text\"\n              placeholder=\"Search what you want..\"\n              onChange={handleChange}\n              value={inputvalue}\n            />\n            {movies && (\n              <div\n                className=\"container-busqueda-resultados\"\n                id=\"container-busqueda-resultados\"\n              >\n                <ul className=\"resultados-busqueda\">\n                  {movies.results?.map((mov, i) =>\n                    mov.original_title ? (\n                      <li className=\"single-result-search\" key={i}>\n                        <a href={`/movies/singlemovie/${mov.id}`}>\n                          {mov.original_title}\n                        </a>\n                      </li>\n                    ) : (\n                      \"\"\n                    )\n                  )}\n                </ul>\n              </div>\n            )}\n          </form>\n        )}\n      </div>\n\n      <div className=\"login-logout-container\">\n        {sessUser?.id ? (\n          <>\n            <button onClick={handleLogout} className=\"login-logout-btn\">\n              Log out\n            </button>\n\n            <Link to={\"/user-profile\"}>\n              <p>{sessUser.name}'s profile</p>\n            </Link>\n          </>\n        ) : (\n          <Link to={\"/user/login\"}>\n            <button className=\"login-logout-btn\">Log in</button>\n          </Link>\n        )}\n      </div>\n    </header>\n  )\n}\n\nexport default Navbar\n"]},"metadata":{},"sourceType":"module"}