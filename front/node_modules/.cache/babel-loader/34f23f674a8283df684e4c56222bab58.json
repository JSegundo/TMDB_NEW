{"ast":null,"code":"import _regeneratorRuntime from\"/home/segundo/Desktop/TMDB_NEW/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/segundo/Desktop/TMDB_NEW/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/segundo/Desktop/TMDB_NEW/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{motion}from\"framer-motion\";import{useUser}from\"../context/UserContext.js\";import{baseUrl}from\"../utils/baseUrl.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useUser=useUser(),setUser=_useUser.setUser,setToken=_useUser.setToken;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var handleChange=function handleChange(e){if(e.target.name===\"email\")setEmail(e.target.value);if(e.target.name===\"password\")setPassword(e.target.value);};var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);e.preventDefault();_context.prev=2;_context.next=5;return axios.post(\"\".concat(baseUrl,\"/user/login\"),{email:email,password:password});case 5:result=_context.sent;localStorage.setItem(\"sess-user\",JSON.stringify(result.data.user));sessionStorage.setItem(\"token\",result.data.token);setUser(result.data.user);navigate(\"/\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);setError(\"Your email or password were incorrect.\");case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(motion.div,{className:\"containerLoginForm\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:1,transition:{duration:0.4}},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,method:\"post\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"text\",autoComplete:\"email\",placeholder:\"email\",required:true,autoFocus:true,onChange:handleChange,value:email.value}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"current-password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"current-password\",name:\"password\",type:\"password\",autoComplete:\"current-password\",placeholder:\"******\",required:true,autoFocus:true,onChange:handleChange,value:password.value}),/*#__PURE__*/_jsxs(\"div\",{classname:\"container-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"loginbtn\",children:\"Sign in\"}),/*#__PURE__*/_jsx(Link,{to:\"/user/register\",className:\"registerbtn\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Create an account.\"})})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{padding:6,width:\"fit-content\",borderBottom:\"2px solid red\"},children:error})]})});};export default Login;","map":{"version":3,"sources":["/home/segundo/Desktop/TMDB_NEW/front/src/layouts/Login.jsx"],"names":["axios","React","useState","Link","useNavigate","motion","useUser","baseUrl","Login","setUser","setToken","email","setEmail","password","setPassword","error","setError","handleChange","e","target","name","value","navigate","handleSubmit","preventDefault","post","result","localStorage","setItem","JSON","stringify","data","user","sessionStorage","token","opacity","transition","duration","padding","width","borderBottom"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useState } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { useNavigate } from \"react-router-dom\"\nimport { motion } from \"framer-motion\"\nimport { useUser } from \"../context/UserContext.js\"\nimport { baseUrl } from \"../utils/baseUrl.js\"\nconst Login = () => {\n  const { setUser, setToken } = useUser()\n\n  const [email, setEmail] = useState({})\n  const [password, setPassword] = useState({})\n  const [error, setError] = useState(null)\n\n  const handleChange = (e) => {\n    if (e.target.name === \"email\") setEmail(e.target.value)\n    if (e.target.name === \"password\") setPassword(e.target.value)\n  }\n  const navigate = useNavigate()\n\n  const handleSubmit = async (e) => {\n    setError(null)\n\n    e.preventDefault()\n    try {\n      const result = await axios.post(`${baseUrl}/user/login`, {\n        email,\n        password,\n      })\n      localStorage.setItem(\"sess-user\", JSON.stringify(result.data.user))\n      sessionStorage.setItem(\"token\", result.data.token)\n      setUser(result.data.user)\n      navigate(\"/\")\n    } catch (err) {\n      setError(\"Your email or password were incorrect.\")\n    }\n  }\n\n  return (\n    <motion.div\n      className=\"containerLoginForm\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 1, transition: { duration: 0.4 } }}\n    >\n      <form onSubmit={handleSubmit} method=\"post\">\n        {/* <div> */}\n        <label htmlFor=\"email\">Email</label>\n        <input\n          id=\"email\"\n          name=\"email\"\n          type=\"text\"\n          autoComplete=\"email\"\n          placeholder=\"email\"\n          required\n          autoFocus\n          onChange={handleChange}\n          value={email.value}\n        />\n\n        <label htmlFor=\"current-password\">Password</label>\n        <input\n          id=\"current-password\"\n          name=\"password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n          placeholder=\"******\"\n          required\n          autoFocus\n          onChange={handleChange}\n          value={password.value}\n        />\n        {/* </div> */}\n        <div classname=\"container-buttons\">\n          <button type=\"submit\" className=\"loginbtn\">\n            Sign in\n          </button>\n          {/* <button className=\"loginbtn\">Sign in with Google</button> */}\n          <Link to={\"/user/register\"} className=\"registerbtn\">\n            <p>Create an account.</p>\n          </Link>\n        </div>\n        {error && (\n          <p\n            style={{\n              padding: 6,\n              width: \"fit-content\",\n              borderBottom: \"2px solid red\",\n            }}\n          >\n            {error}\n          </p>\n        )}\n      </form>\n    </motion.div>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}